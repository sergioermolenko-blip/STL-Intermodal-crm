---
description: Правило отладки - всегда начинать с локального запуска тестов
---

# Правило отладки: Tests First!

**При отладке CI/CD или любых ошибок - СНАЧАЛА запускай тесты локально!**

## Почему это важно

1. **Тесты сразу показывают ошибку** - не нужно ждать push → CI → проверку логов
2. **Экономит время** - вместо 5-10 циклов push-wait-check делаем 1 локальный тест
3. **Точная диагностика** - локальные логи полные и понятные

## Алгоритм

### При ошибке CI:
```bash
# 1. Сначала запусти тесты локально
npm run test:unit
npm run test:e2e

# 2. Если тесты падают - исправь локально
# 3. Если тесты проходят - проблема в окружении CI

# 4. Симулируй CI окружение:
rm -r node_modules
npm install        # <-- тут видно ошибки зависимостей!
npm run test:all
```

### Пример (реальный случай):
```
Проблема: CI падает на npm install за 8 секунд
Решение:
  1. Удалили node_modules
  2. Запустили npm install локально
  3. Увидели: "No matching version found for vitest@^2.2.4"
  4. Исправили версию → CI работает!
```

## Правило

> **НЕ делай push-wait-check циклы!**
> **Сначала воспроизведи проблему локально!**
