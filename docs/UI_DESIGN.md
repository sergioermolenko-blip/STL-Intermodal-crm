---
description: UI-концепция для системы заказов STL Intermodal CRM
---

# UI Design - Система заказов

Концепция пользовательского интерфейса для работы с заказами.

## Паттерн: Master-Detail

Два основных экрана:
1. **Список заказов** (Master) - обзор всех заказов
2. **Карточка заказа** (Detail) - детальная информация

---

## Экран 1: Список заказов

### Компоненты
- Заголовок с кнопкой "Новый заказ"
- Панель фильтров (статус, клиент, период, поиск)
- Таблица заказов

### Колонки таблицы
| Колонка | Описание |
|---------|----------|
| Номер | STL-2024-001234 (кликабельный) |
| Статус | Цветной бейдж со статусом |
| Клиент | Название компании |
| Маршрут | Откуда → Куда (с флагами стран) |
| Транспорт | Иконка (🚛🚂🚢✈️) |
| Дата | Дата создания/погрузки |

### Фильтры
- По статусу (dropdown)
- По клиенту (dropdown с поиском)
- По периоду (сегодня, неделя, месяц, все)
- Текстовый поиск (по номеру, клиенту, маршруту)

### Действия
- Клик по строке → открытие карточки
- Кнопка "Новый заказ" → форма создания

---

## Экран 2: Карточка заказа

### Структура

```
┌─────────────────────────────────────────────────┐
│ Шапка: Номер заказа + кнопка "Назад"            │
├─────────────────────────────────────────────────┤
│ Timeline статусов (горизонтальный прогресс-бар) │
│ Кнопки: [← Назад] [Следующий →]                 │
├─────────────────────────────────────────────────┤
│ Секция: Клиент | Маршрут | Перевозчик           │
├─────────────────────────────────────────────────┤
│ Секция: Груз                                    │
├─────────────────────────────────────────────────┤
│ Секция: Финансы                                 │
├─────────────────────────────────────────────────┤
│ Действия: [Редактировать] [Документы] [История] │
└─────────────────────────────────────────────────┘
```

### Секции карточки

#### 1. Timeline статусов
- Горизонтальная линия с точками
- Пройденные этапы - закрашены
- Текущий этап - выделен
- Будущие этапы - пустые
- Кнопки перехода к следующему/предыдущему статусу

#### 2. Клиент
- Название компании
- Контактное лицо
- Телефон, email
- Инкотермс

#### 3. Маршрут
- Страна/город отправления (с флагом)
- Страна/город назначения (с флагом)
- Даты (план/факт)

#### 4. Перевозчик
- Название компании
- Данные транспорта (номер авто / судно / вагон)
- Контакт водителя/агента

#### 5. Груз
- Описание
- Вес, объём
- Контейнер (если есть)
- Особенности (опасный, температурный)

#### 6. Финансы
- Ставка клиента
- Расходы
- Маржа (сумма и процент)

### Действия в карточке
- Редактировать - открыть форму редактирования
- Документы - список прикреплённых файлов
- История - лог изменений
- Удалить - с подтверждением

---

## Цвета статусов

```css
/* Этап 1-3: До подтверждения */
.status-draft           { background: #9E9E9E; } /* Серый */
.status-inquiry         { background: #2196F3; } /* Синий */
.status-carrier_quote   { background: #03A9F4; } /* Голубой */
.status-quotes_received { background: #00BCD4; } /* Циан */
.status-proposal_draft  { background: #009688; } /* Бирюзовый */
.status-proposal_sent   { background: #FF9800; } /* Оранжевый */
.status-client_approved { background: #8BC34A; } /* Салатовый */

/* Этап 4: Бронирование */
.status-booking         { background: #CDDC39; } /* Лайм */
.status-confirmed       { background: #4CAF50; } /* Зелёный */

/* Этап 5: Исполнение */
.status-picked_up       { background: #4CAF50; } /* Зелёный */
.status-export_customs  { background: #009688; } /* Бирюзовый */
.status-departed        { background: #00BCD4; } /* Циан */
.status-in_transit      { background: #3F51B5; } /* Индиго */
.status-arrived         { background: #673AB7; } /* Фиолетовый */
.status-import_customs  { background: #9C27B0; } /* Пурпурный */
.status-delivered       { background: #4CAF50; } /* Зелёный */

/* Этап 6: Финансы */
.status-invoiced        { background: #FFC107; } /* Жёлтый */
.status-paid            { background: #8BC34A; } /* Салатовый */
.status-closed          { background: #607D8B; } /* Серо-синий */

/* Исключения */
.status-cancelled       { background: #F44336; } /* Красный */
.status-hold            { background: #FF5722; } /* Оранжево-красный */
.status-problem         { background: #F44336; } /* Красный */
```

---

## Иконки транспорта warna

| Тип | Иконка | Код |
|-----|--------|-----|
| Авто | 🚛 | `auto` |
| ЖД | 🚂 | `rail` |
| Море | 🚢 | `sea` |
| Авиа | ✈️ | `air` |
| Мультимодал | 🔄 | `multimodal` |
| Не определён | ❓ | `tbd` |

---

## Экран 3: Wizard-форма создания заказа

### Структура
```
┌──────────────────────────────────────────────────────────────┐
│ Создание заказа                                    [✕ Закрыть]│
├────────────┬─────────────────────────────────────────────────┤
│            │                                                 │
│ ● Клиент   │   [Активная секция - полная форма]             │
│ ○ Маршрут  │                                                 │
│ ○ Груз     │                                                 │
│ ○ Транспорт│                                                 │
│ ○ Финансы  │                                                 │
│            │                                                 │
│            │                                                 │
│            │         [← Назад]  [Далее →]                    │
└────────────┴─────────────────────────────────────────────────┘
```

### Секции Wizard

#### 1. Клиент
- Выбор клиента (dropdown с поиском)
- Выбор контакта (фильтруется по клиенту)
- Инкотермс
- Способ оплаты фрахта (Prepaid/Collect)

#### 2. Маршрут
- Страна/город отправления
- Адрес отправления
- Страна/город назначения
- Адрес назначения
- Даты (планируемые)

#### 3. Груз
- Описание груза
- Вес, объём
- Количество мест
- Тип упаковки
- Опасный груз (checkbox + детали)
- Температурный режим (checkbox + мин/макс)

#### 4. Транспорт
- Тип транспорта (авто/ЖД/море/авиа/мультимодал/TBD)
- Тип кузова/контейнера
- Требования к транспорту

#### 5. Финансы
- Ставка клиента
- Валюта
- Примечания

### Логика Wizard

```javascript
// Состояния секций
const sectionStates = {
  INCOMPLETE: 'incomplete',  // Серый круг
  CURRENT: 'current',        // Синий круг с заливкой
  COMPLETE: 'complete',      // Зелёная галочка
  ERROR: 'error'             // Красный восклицательный
};

// Минимальные обязательные поля для сохранения черновика
const requiredForDraft = ['clientId'];

// Обязательные поля для создания заказа
const requiredForCreate = [
  'clientId',
  'originCountry', 'originCity',
  'destinationCountry', 'destinationCity'
];
```

### Навигация
- Можно кликать на любую секцию в сайдбаре
- Кнопка "Далее" → следующая секция
- Кнопка "Назад" → предыдущая секция
- Кнопка "Сохранить черновик" → сохранить в любой момент
- Кнопка "Создать заказ" → создать (только если заполнены обязательные)

### Валидация
- Inline-валидация при потере фокуса
- Секция помечается как "error" если есть ошибки
- Нельзя создать заказ пока есть ошибки

